function g(a){throw a;}var l=true,m=null,n=false;function o(){return function(){}}function q(a){return function(){return this[a]}};Node=function(a,b){this.id=a;this.data=b?b:{};this.edges=[]};window.Node=Node;Node.prototype.la=function(){for(var a=[],b=0;b<this.edges.length;b++)this.edges[b].tailNode.id==this.id?a.push(this.edges[b].headNode):a.push(this.edges[b].tailNode);return a};Node.prototype.getNeighborNodes=Node.prototype.la;Edge=function(a,b,c,d){this.id=a;this.tailNode=b;this.headNode=c;this.data=d?d:{}};window.Edge=Edge;Graph=function(){this.d=[];this.c=[]};window.Graph=Graph;
Graph.prototype.G=function(a,b){this.n(a)&&g("Failed to add node. Node already exists.");var c=new Node(a,b);this.d.push(c);return c};Graph.prototype.addNode=Graph.prototype.G;Graph.prototype.n=function(a){for(var b=0;b<this.d.length;b++)if(this.d[b].id==a)return this.d[b];return m};Graph.prototype.getNode=Graph.prototype.n;Graph.prototype.C=function(){return this.d.concat()};Graph.prototype.getNodes=Graph.prototype.C;Graph.prototype.X=function(){return this.d.map(function(a){return a.id})};
Graph.prototype.getNodeIds=Graph.prototype.X;Graph.prototype.na=function(){return this.d.length};Graph.prototype.getNodeLength=Graph.prototype.na;Graph.prototype.removeNode=function(a){for(var b=0;b<this.d.length;b++)if(this.d[b].id==a){this.d.splice(b,1);return}g("Failed to remove node. Node does not exist.")};Graph.prototype.removeNode=Graph.prototype.removeNode;
Graph.prototype.F=function(a,b,c,d){this.J(a)&&g("Failed to add edge. Edge already exists.");(b=this.n(b))||g("Failed to add edge. Tail node does not exist.");(c=this.n(c))||g("Failed to add edge. Head node does not exist.");a=new Edge(a,b,c,d);this.c.push(a);b.edges.push(a);c.edges.push(a);return a};Graph.prototype.addEdge=Graph.prototype.F;Graph.prototype.J=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b].id==a)return this.c[b];return m};Graph.prototype.getEdge=Graph.prototype.J;
Graph.prototype.V=function(){return this.c.map(function(a){return a.id})};Graph.prototype.getEdgeIds=Graph.prototype.V;Graph.prototype.W=function(){return this.c.concat()};Graph.prototype.getEdges=Graph.prototype.W;Graph.prototype.ka=function(){return this.c.length};Graph.prototype.getEdgeLength=Graph.prototype.ka;
Graph.prototype.$=function(a){var b,c=m;for(b=0;b<this.c.length;b++)if(this.c[b].id==a){c=this.c[b];this.c.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}}else g("Failed to remove edge. Edge does not exist.")};Graph.prototype.removeEdge=Graph.prototype.$;GraphLoader=function(a){if(!(arguments.length<=0))this.config=a,this.parser=this.constellation=m};window.GraphLoader=GraphLoader;GraphLoader.prototype.U=q("constellation");GraphLoader.prototype.getConstellation=GraphLoader.prototype.U;GraphLoader.prototype.e=function(a){this.constellation=a};GraphLoader.prototype.setConstellation=GraphLoader.prototype.e;GraphLoader.prototype.ab=q("parser");GraphLoader.prototype.getParser=GraphLoader.prototype.ab;GraphLoader.prototype.mb=function(a){this.parser=a};
GraphLoader.prototype.setParser=GraphLoader.prototype.mb;SimpleGraphLoader=function(a){arguments.length<=0||GraphLoader.call(this,a)};window.SimpleGraphLoader=SimpleGraphLoader;SimpleGraphLoader.prototype=new GraphLoader;SimpleGraphLoader.prototype.e=function(a){this.constellation&&jQuery(this.constellation).unbind("initialized");GraphLoader.prototype.e.call(this,a);this.constellation&&jQuery(this.constellation).bind("initialized",{context:this},function(a){a=a.data.context;a.load(a.config.url)})};
SimpleGraphLoader.prototype.setConstellation=SimpleGraphLoader.prototype.e;SimpleGraphLoader.prototype.load=function(a){this.parser||g("Graph loading halted. No parser has been set.");jQuery.ajax({url:a,context:this,success:function(a){this.parser.parse(a)}})};SimpleGraphLoader.prototype.load=SimpleGraphLoader.prototype.load;TreeGraphLoader=function(a){arguments.length<=0||GraphLoader.call(this,a)};window.TreeGraphLoader=TreeGraphLoader;TreeGraphLoader.prototype=new GraphLoader;
TreeGraphLoader.prototype.e=function(a){GraphLoader.prototype.e.call(this,a);jQuery(this.constellation).bind("selectedNode",o())};GraphParser=function(a){if(!(arguments.length<=0))this.config=a,this.graph=m};window.GraphParser=GraphParser;GraphParser.prototype.Va=q("graph");GraphParser.prototype.getGraph=GraphParser.prototype.Va;GraphParser.prototype.lb=function(a){this.graph=a};GraphParser.prototype.setGraph=GraphParser.prototype.lb;GraphParser.prototype.parse=o();GraphParser.prototype.parse=GraphParser.prototype.parse;RoamerGraphParser=function(a){arguments.length<=0||GraphParser.call(this,a)};window.RoamerGraphParser=RoamerGraphParser;
RoamerGraphParser.prototype=new GraphParser;RoamerGraphParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph;a.find("node").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.G(d.attr("id"),e)});a.find("edge").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.F(d.attr("id"),d.attr("tail_node_id"),d.attr("head_node_id"),e)});jQuery(this).trigger("complete")};
RoamerGraphParser.prototype.parse=RoamerGraphParser.prototype.parse;GraphMlParser=function(a){arguments.length<=0||GraphParser.call(this,a)};window.GraphMlParser=GraphMlParser;GraphMlParser.prototype=new GraphParser;
GraphMlParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph,c={};a.find('key[for="node"]').each(function(a,b){b=jQuery(b);c[b.attr("id")]=b});var d={};a.find('key[for="edge"]').each(function(a,b){b=jQuery(b);d[b.attr("id")]=b});a.find("node").each(function(a,d){var d=jQuery(d),h={},i;for(i in c){var j=c[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),k=d.find('data[key="'+i+'"]');k.length>0&&(h[j]=k.text())}b.G(d.attr("id"),h)});a.find("edge").each(function(a,c){var c=
jQuery(c),h={},i;for(i in d){var j=d[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),k=c.find('data[key="'+i+'"]');k.length>0&&(h[j]=k.text())}b.F(c.attr("source")+":"+c.attr("target"),c.attr("source"),c.attr("target"),h)});jQuery(this).trigger("complete")};GraphMlParser.prototype.parse=GraphMlParser.prototype.parse;GraphView=function(a){if(!(arguments.length<=0))this.config=a,this.result=this.source=this.constellation=m,this.Aa=l};window.GraphView=GraphView;GraphView.prototype.U=q("constellation");GraphView.prototype.getConstellation=GraphView.prototype.U;GraphView.prototype.e=function(a){this.constellation=a;this.K()};GraphView.prototype.setConstellation=GraphView.prototype.e;GraphView.prototype.eb=q("source");GraphView.prototype.getSource=GraphView.prototype.eb;
GraphView.prototype.ob=function(a){this.source=a;this.K()};GraphView.prototype.setSource=GraphView.prototype.ob;GraphView.prototype.Ra=function(){this.K()};GraphView.prototype.sourceChanged=GraphView.prototype.Ra;GraphView.prototype.bb=q("result");GraphView.prototype.getResult=GraphView.prototype.bb;GraphView.prototype.nb=function(a){this.result=a;this.K()};GraphView.prototype.setResult=GraphView.prototype.nb;
GraphView.prototype.K=function(){if(this.Aa){this.Aa=n;var a=this;window.setTimeout(function(){var b=a.R();a.Aa=l;b&&jQuery(a).trigger("change")},50)}};GraphView.prototype.invalidate=GraphView.prototype.K;GraphView.prototype.R=function(){return n};GraphView.prototype.validate=GraphView.prototype.R;DirectGraphView=function(a){arguments.length<=0||GraphView.call(this,a)};window.DirectGraphView=DirectGraphView;DirectGraphView.prototype=new GraphView;
DirectGraphView.prototype.R=function(){var a,b=this.result.X(),c=this.result.V(),d=this.source.C(),e=this.source.W();for(a=0;a<e.length;a++)if(index=c.indexOf(e[a].id),index>=0)edge=this.result.J(e[a].id),edge.data=e[a].data,c.splice(index,1),e.splice(a,1),a--;for(a=0;a<d.length;a++)if(index=b.indexOf(d[a].id),index>=0)node=this.result.n(d[a].id),node.data=d[a].data,b.splice(index,1),d.splice(a,1),a--;for(a=0;a<c.length;a++)this.result.$(c[a]);for(a=0;a<b.length;a++)this.result.removeNode(b[a]);for(a=
0;a<d.length;a++)b=d[a],this.result.G(b.id,b.data);for(a=0;a<e.length;a++)d=e[a],this.result.F(d.id,d.tailNode.id,d.headNode.id,d.data);return l};DirectGraphView.prototype.validate=DirectGraphView.prototype.R;TreeGraphView=function(a){if(!(arguments.length<=0))GraphView.call(this,a),this.t=this.kb=m,this.ya=n,this.aa=1};window.TreeGraphView=TreeGraphView;TreeGraphView.prototype=new GraphView;
TreeGraphView.prototype.e=function(a){this.constellation&&jQuery(this.constellation).unbind("nodeSelected");GraphView.prototype.e.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodeSelected",{context:this},function(a){a.data.context.La()})};TreeGraphView.prototype.setConstellation=TreeGraphView.prototype.e;TreeGraphView.prototype.La=function(){this.ya=l;this.kb=this.t;this.t=this.constellation.Ea();this.K()};TreeGraphView.prototype.selectedNodeHandler=TreeGraphView.prototype.La;
TreeGraphView.prototype.R=function(){var a,b;if(this.ya)this.aa=2;if(a=this.source.n(this.t)){a.depth=0;var c=this.result.X(),d=this.result.V(),e=[a],f=[];b={};var h=[a];for(b[this.t]={Q:this.aa,ca:0};h.length>0;){var i=h.shift(),j=b[i.id];if(j.Q>0){var k=i.edges;for(a=0;a<k.length;a++){var p=k[a],u;u=p.tailNode.id==i.id?p.headNode:p.tailNode;var r=b[u.id];if((!r||r.Q<j.Q-1)&&j.Q>1)r=j.Q-1,u.depth=j.ca+1,e.push(u),h.push(u),r={Q:r,ca:j.ca+1},b[u.id]=r;if(jQuery.inArray(p,f)<0&&r)p.depth=j.ca,f.push(p)}}}for(a=
0;a<f.length;a++)if(b=d.indexOf(f[a].id),b>=0)p=this.result.J(f[a].id),p.data=f[a].data,d.splice(b,1),f.splice(a,1),a--;for(a=0;a<e.length;a++)if(b=c.indexOf(e[a].id),b>=0)node=this.result.n(e[a].id),node.data=e[a].data,c.splice(b,1),e.splice(a,1),a--;for(a=0;a<d.length;a++)this.result.$(d[a]);for(a=0;a<c.length;a++)this.result.removeNode(c[a]);for(a=0;a<e.length;a++)c=e[a],this.result.G(c.id,c.data);for(a=0;a<f.length;a++)e=f[a],this.result.F(e.id,e.tailNode.id,e.headNode.id,e.data);this.ya=n;if(this.aa<
3){clearTimeout(this.fb);var v=this;this.fb=setTimeout(function(){v.aa++;v.K()},1E3)}return l}};TreeGraphView.prototype.validate=TreeGraphView.prototype.R;Layout=function(a){arguments.length<=0||(this.config=a)};window.Layout=Layout;Layout.prototype.U=q("constellation");Layout.prototype.getConstellation=Layout.prototype.U;Layout.prototype.e=function(a){this.constellation=a};Layout.prototype.setConstellation=Layout.prototype.e;Layout.prototype.A=function(){for(var a=this.constellation.C(),b=0;b<a.length;b++){var c=a[b];if(c.x==m||c.y==m)c.x=Math.floor((Math.random()*100-50)/10)*10,c.y=Math.floor((Math.random()*100-50)/10)*10}jQuery(this).trigger("change")};
Layout.prototype.viewChanged=Layout.prototype.A;StaticLayout=function(a){if(!(arguments.length<=0))Layout.call(this,a),this.u=m};window.StaticLayout=StaticLayout;StaticLayout.prototype=new Layout;
StaticLayout.prototype.e=function(a){this.constellation&&jQuery(this.constellation).unbind("nodemousedown").unbind("mouseup");Layout.prototype.e.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodemousedown",{context:this},function(a){a.data.context.Z(a)}).bind("mouseup",{context:this},function(a){a.data.context.ra(a)})};StaticLayout.prototype.setConstellation=StaticLayout.prototype.e;
StaticLayout.prototype.A=function(){for(var a=this.constellation.C(),b=0;b<a.length;b++){var c=a[b];if(c.x==m||c.y==m)c.x=c.data.x?c.data.x:(Math.random()-0.5)*this.constellation.T,c.y=c.data.y?c.data.y:(Math.random()-0.5)*this.constellation.S}jQuery(this).trigger("change")};StaticLayout.prototype.viewChanged=StaticLayout.prototype.A;StaticLayout.prototype.Z=function(){this.step()};StaticLayout.prototype.ra=function(){this.u&&clearInterval(this.u)};
StaticLayout.prototype.step=function(){for(var a in this.constellation.g){var b=this.constellation.g[a];if(b.s){var c=b.f,d=b.s,e=s(this.constellation,c.pageX)-b.sa,b=t(this.constellation,c.pageY)-b.ta;d.x=w(this.constellation,e,b);d.y=x(this.constellation,e,b)}}jQuery(this).trigger("change");this.u&&clearTimeout(this.u);this.u=setTimeout(function(a){return function(){a.step()}}(this),40)};
RoamerLayout=function(a){if(!(arguments.length<=0))Layout.call(this,a),this.u=m,this.za=[],this.qb=NaN,this.Ab=20,this.xb=n};window.RoamerLayout=RoamerLayout;RoamerLayout.prototype=new Layout;RoamerLayout.prototype.e=function(a){this.constellation&&(jQuery(this.constellation).unbind("nodeAdded"),this.u&&clearTimeout(this.u));Layout.prototype.e.call(this,a);this.constellation&&(jQuery(this.constellation).bind("nodeAdded",{context:this},function(a,c){a.data.context.za.push(c)}),this.step())};
RoamerLayout.prototype.setConstellation=RoamerLayout.prototype.e;RoamerLayout.prototype.A=o();RoamerLayout.prototype.viewChanged=RoamerLayout.prototype.A;
RoamerLayout.prototype.step=function(){for(;this.za.length>0;)y(this,this.za.shift());for(var a=this.constellation.Da(),b=-0.1*(a.x+a.width/2),a=-0.1*(a.y+a.height/2),c=this.constellation.C(),d=0;d<c.length;d++)for(var e=c[d],f=d+1;f<c.length;f++){var h=c[f],i=h.x-e.x,j=h.y-e.y;i==0&&j==0&&(i=Math.random()*0.5,j=Math.random()*0.5);for(var k=Math.sqrt(i*i+j*j),p=i-i/k*100,u=j-j/k*100,i=j=0,r=n,v=0;v<e.edges.length;v++){var D=e.edges[v];if(D.tailNode.id==h.id||D.headNode.id==h.id)r=l}r&&k>100?(j=p*
0.2,i=u*0.2):k<100&&(j=p*0.2,i=u*0.2);k=1;p=e.edges.length;p>0&&(k=1/Math.pow(p,1/3));e.ax+=j*k;e.ay+=i*k;k=1;p=h.edges.length;p>0&&(k=1/Math.pow(p,1/3));h.ax-=j*k;h.ay-=i*k}for(d=0;d<c.length;d++){e=c[d];f=Math.sqrt(e.ax*e.ax+e.ay*e.ay);if(f>15)e.ax=e.ax/f*15,e.ay=e.ay/f*15;e.ax-=e.vx*0.3;e.ay-=e.vy*0.3;e.vx+=e.ax;e.vy+=e.ay;e.x+=e.vx+b;e.y+=e.vy+a;e.ax=0;e.ay=0}for(var G in this.constellation.g)if(c=this.constellation.g[G],c.s)d=c.f,b=c.s,a=s(this.constellation,d.pageX)-c.sa,c=t(this.constellation,
d.pageY)-c.ta,b.x=w(this.constellation,a,c),b.y=x(this.constellation,a,c);jQuery(this).trigger("change");this.u&&clearTimeout(this.u);this.u=setTimeout(function(a){return function(){a.step()}}(this),40)};function y(a,b){var c=0,d=0,e=b.la().filter(a.Ca),f=z(e);if(e.length>1)c=f.x,d=f.y;else if(e.length>0)d=e[0],c=d.la().filter(a.Ca),c.length>0?(c=z(c),e={x:d.x-c.x,y:d.y-c.y},f=Math.sqrt(e.x*e.x+e.y*e.y),c=d.x+50*e.x/f,d=d.y+50*e.y/f):(c=d.x,d=d.y);b.x=c+Math.random()-0.5;b.y=d+Math.random()-0.5}
RoamerLayout.prototype.Ca=function(a){return a.x!=m||a.y!=m};function z(a){if(a.length<=0)return m;for(var b=0,c=0,d=0;d<a.length;d++){var e=a[d];b+=e.x;c+=e.y}return{x:b/a.length,y:c/a.length}};NodeRenderer=function(a,b,c){this.constellation=a;Node.call(this,b,c);this.data.classes||(this.data.classes=[]);this.y=this.x=m;this.ay=this.ax=this.vy=this.vx=0};window.NodeRenderer=NodeRenderer;NodeRenderer.prototype=new Node;NodeRenderer.prototype.B={};NodeRenderer.prototype.k=function(a){return this.constellation.k("node",this.data.classes,a,this.data,this.B)};NodeRenderer.prototype.getStyle=NodeRenderer.prototype.k;
NodeRenderer.prototype.addClass=function(a){jQuery.inArray(a,this.data.classes)<0&&this.data.classes.push(a)};NodeRenderer.prototype.addClass=NodeRenderer.prototype.addClass;NodeRenderer.prototype.hasClass=function(a){return jQuery.inArray(a,this.data.classes)>=0};NodeRenderer.prototype.hasClass=NodeRenderer.prototype.hasClass;NodeRenderer.prototype.removeClass=function(a){for(var b;(b=jQuery.inArray(a,this.data.classes))>=0;)this.data.classes.splice(b,1)};NodeRenderer.prototype.removeClass=NodeRenderer.prototype.removeClass;
NodeRenderer.prototype.create=o();NodeRenderer.prototype.create=NodeRenderer.prototype.create;NodeRenderer.prototype.l=o();NodeRenderer.prototype.draw=NodeRenderer.prototype.l;NodeRenderer.prototype.position=o();NodeRenderer.prototype.position=NodeRenderer.prototype.position;NodeRenderer.prototype.o=o();NodeRenderer.prototype.destroy=NodeRenderer.prototype.o;DefaultNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c)};window.DefaultNodeRenderer=DefaultNodeRenderer;
DefaultNodeRenderer.prototype=new NodeRenderer;DefaultNodeRenderer.prototype.B={};
DefaultNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.ma(),{display:"none"});this.a={group:b,D:a.circle(b,0,0,30,{fill:"#ffffff",stroke:"#666666",strokeWidth:1}),pa:a.rect(b,0,0,0,0,2,2,{fill:"#ffffcc",stroke:"#333333",strokeWidth:1}),label:a.text(b,0,0,this.data.label,{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:15,fontWeight:"bold",fill:"#441111",
textAnchor:"middle",dy:".35em"})};jQuery(this.a.group).bind("mouseover",{context:this},function(a){a.data.context.constellation.wa(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.va(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.Z(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.xa(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ua(0,
a.data.context)})};DefaultNodeRenderer.prototype.create=DefaultNodeRenderer.prototype.create;DefaultNodeRenderer.prototype.l=function(){var a=this.a.label.getBBox(),b=jQuery(this.a.pa);a.width>0&&a.height>0?(b.css("display","inline"),b.attr("x",a.x-8),b.attr("y",a.y-3),b.attr("width",a.width+16),b.attr("height",a.height+6)):b.css("display","none");this.position();jQuery(this.a.group).css("display","inline")};DefaultNodeRenderer.prototype.draw=DefaultNodeRenderer.prototype.l;
DefaultNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")")};DefaultNodeRenderer.prototype.position=DefaultNodeRenderer.prototype.position;DefaultNodeRenderer.prototype.o=function(){jQuery(this.a.group).remove();this.a=m};DefaultNodeRenderer.prototype.destroy=DefaultNodeRenderer.prototype.o;RoamerNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c);this.zb=this.yb=this.tb=this.Ha=this.Ga=this.label=m};
window.RoamerNodeRenderer=RoamerNodeRenderer;RoamerNodeRenderer.prototype=new NodeRenderer;
RoamerNodeRenderer.prototype.B={label:"",tooltip:"",url:"",url_target:"_self",graphic_type:"shape",graphic_image_url:"",graphic_shape:"circle",graphic_fill_color:"#ffffff",graphic_line_color:"#000000",graphic_gradient_fill:l,graphic_size:40,selected_graphic_shape:"circle",selected_graphic_fill_color:"#ffffff",selected_graphic_line_color:"#000000",selected_graphic_gradient_fill:l,selected_graphic_size:40,left_icon_url:"",right_icon_url:"",selected_left_icon_url:"",selected_right_icon_url:"",left_icon_spacing:0,
right_icon_spacing:0,label_bg_enabled:l,label_bg_fill_color:"#ffffff",label_bg_line_color:"#000000",label_bg_rounded_corners:l,selected_label_bg_enabled:l,selected_label_bg_fill_color:"#ffffff",selected_label_bg_line_color:"#000000",selected_label_bg_rounded_corners:l,label_position:"center",label_embed_fonts:l,label_font_color:"#000000",label_font_bold:n,label_font_family:"Arial",label_font_italic:n,label_font_size:12,selected_label_font_color:"#000000",selected_label_font_bold:l,selected_label_font_family:"Arial",
selected_label_font_italic:n,selected_label_font_size:12};
RoamerNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.ma(),{display:"none"});this.a={group:b,Fa:a.group(b),D:m,pa:a.rect(b,0,0,0,0,2,2,{fill:"#ffffcc",stroke:"#333333",strokeWidth:1}),label:a.text(b,0,0,"",{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:15,fontWeight:"bold",fill:"#441111",textAnchor:"middle",dy:".35em"})};jQuery(this.a.group).bind("mouseover",
{context:this},function(a){a.data.context.constellation.wa(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.va(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.Z(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.xa(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ua(0,a.data.context)})};RoamerNodeRenderer.prototype.create=RoamerNodeRenderer.prototype.create;
RoamerNodeRenderer.prototype.l=function(){var a=this.constellation.svg;jQuery(this.a.group).css("display","inline");var b={fill:this.k("graphic_fill_color"),stroke:this.k("graphic_line_color")},c=this.k("label"),d=this.k("graphic_size"),e=this.k("graphic_shape");if(this.Ga!=e){if(this.a.D)jQuery(this.a.D).remove(),this.a.D=m;switch(e){case "pentagon":break;case "square":this.a.D=a.rect(this.a.Fa,-d/2,-d/2,d,d,b);break;case "diamond":break;case "triangle":break;case "circle":this.a.D=a.circle(this.a.Fa,
0,0,d/2,b);break;default:g("Failed to draw node graphic. Unknown shape. shape='"+e+"'")}}else{if(this.Ha!=d)switch(e){case "pentagon":break;case "square":b.x=-d/2;b.y=-d/2;b.width=d;b.height=d;break;case "diamond":break;case "triangle":break;case "circle":a.change(this.a.D,{r:d/2});break;default:g("Failed to draw node graphic. Unknown shape. shape='"+e+"'")}a.change(this.a.D,b)}this.label!=c&&jQuery(this.a.label).contents().remove().end().append(c);a=this.a.label.getBBox();b=jQuery(this.a.pa);a.width>
0&&a.height>0?(b.css("display","inline"),b.attr("x",a.x-8),b.attr("y",a.y-3),b.attr("width",a.width+16),b.attr("height",a.height+6)):b.css("display","none");this.position();this.label=c;this.Ha=d;this.Ga=e};RoamerNodeRenderer.prototype.draw=RoamerNodeRenderer.prototype.l;RoamerNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")")};RoamerNodeRenderer.prototype.position=RoamerNodeRenderer.prototype.position;
RoamerNodeRenderer.prototype.o=function(){jQuery(this.a.group).remove();this.a=m};RoamerNodeRenderer.prototype.destroy=RoamerNodeRenderer.prototype.o;EdgeRenderer=function(a,b,c,d,e){this.constellation=a;Edge.call(this,b,c,d,e);this.data.classes||(this.data.classes=[])};window.EdgeRenderer=EdgeRenderer;EdgeRenderer.prototype=new Edge;EdgeRenderer.prototype.B={};EdgeRenderer.prototype.k=function(a){return this.constellation.k("edge",this.data.classes,a,this.data,this.pb)};
EdgeRenderer.prototype.getStyle=EdgeRenderer.prototype.k;EdgeRenderer.prototype.addClass=function(a){jQuery.inArray(a,this.data.classes)<0&&this.data.classes.push(a)};EdgeRenderer.prototype.addClass=EdgeRenderer.prototype.addClass;EdgeRenderer.prototype.hasClass=function(a){return jQuery.inArray(a,this.data.classes)>=0};EdgeRenderer.prototype.hasClass=EdgeRenderer.prototype.hasClass;
EdgeRenderer.prototype.removeClass=function(a){for(var b;(b=jQuery.inArray(a,this.data.classes))>=0;)this.data.classes.splice(b,1)};EdgeRenderer.prototype.removeClass=EdgeRenderer.prototype.removeClass;EdgeRenderer.prototype.create=o();EdgeRenderer.prototype.create=EdgeRenderer.prototype.create;EdgeRenderer.prototype.l=o();EdgeRenderer.prototype.draw=EdgeRenderer.prototype.l;EdgeRenderer.prototype.o=o();EdgeRenderer.prototype.destroy=EdgeRenderer.prototype.o;
DefaultEdgeRenderer=function(a,b,c,d,e){EdgeRenderer.call(this,a,b,c,d,e)};window.DefaultEdgeRenderer=DefaultEdgeRenderer;DefaultEdgeRenderer.prototype=new EdgeRenderer;DefaultEdgeRenderer.prototype.B={};
DefaultEdgeRenderer.prototype.create=function(){this.a={line:this.constellation.svg.line(this.constellation.ja(),0,0,10,0,{display:"none",stroke:"#999999",strokeWidth:5})};jQuery(this.a.line).bind("mouseover",{context:this},function(a){a.data.context.constellation.ha(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.ga(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.fa(a,a.data.context)}).bind("mouseup",{context:this},
function(a){a.data.context.constellation.ia(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ea(0,a.data.context)})};DefaultEdgeRenderer.prototype.create=DefaultEdgeRenderer.prototype.create;DefaultEdgeRenderer.prototype.l=function(){jQuery(this.a.line).attr("x1",this.tailNode.x).attr("y1",this.tailNode.y).attr("x2",this.headNode.x).attr("y2",this.headNode.y).css("display","inline")};DefaultEdgeRenderer.prototype.draw=DefaultEdgeRenderer.prototype.l;
DefaultEdgeRenderer.prototype.o=function(){jQuery(this.a.line).remove()};DefaultEdgeRenderer.prototype.destroy=DefaultEdgeRenderer.prototype.o;RoamerEdgeRenderer=function(a,b,c,d,e){EdgeRenderer.call(this,a,b,c,d,e)};window.RoamerEdgeRenderer=RoamerEdgeRenderer;RoamerEdgeRenderer.prototype=new EdgeRenderer;RoamerEdgeRenderer.prototype.B={tooltip:"",edge_line_color:"#000000",edge_line_thickness:1,arrowhead:l,bidirectional:n,reverse:n,edge_length_weight:0};
RoamerEdgeRenderer.prototype.create=function(){this.a={line:this.constellation.svg.line(this.constellation.ja(),0,0,10,0,{display:"none",stroke:"#999999",strokeWidth:5})};jQuery(this.a.line).bind("mouseover",{context:this},function(a){a.data.context.constellation.ha(0,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.ga(0,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.fa(a,a.data.context)}).bind("mouseup",{context:this},
function(a){a.data.context.constellation.ia(0,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.ea(0,a.data.context)})};RoamerEdgeRenderer.prototype.create=RoamerEdgeRenderer.prototype.create;RoamerEdgeRenderer.prototype.l=function(){jQuery(this.a.line).attr("x1",this.tailNode.x).attr("y1",this.tailNode.y).attr("x2",this.headNode.x).attr("y2",this.headNode.y).css("display","inline")};RoamerEdgeRenderer.prototype.draw=RoamerEdgeRenderer.prototype.l;
RoamerEdgeRenderer.prototype.o=function(){jQuery(this.a.line).remove()};RoamerEdgeRenderer.prototype.destroy=RoamerEdgeRenderer.prototype.o;Constellation=function(a,b){this.config=jQuery.extend(l,this.Ta,a);this.da=b?b:this.B;this.d=[];this.c=[];this.svg=m;this.w=this.v=this.S=this.T=0;this.jb=this.ib=m;this.i=1;this.rotation=0;this.g={};this.ub=this.vb=this.O=this.t=this.m=this.b=m};window.Constellation=Constellation;Constellation.wb={};
Constellation.prototype.gb=function(){this.h("Initializing Constellation.");document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||g("Failed to initialize Constellation. SVG not supported.");var a=jQuery("#"+this.config.id);a.length<=0&&g("Failed to initialize Constellation. Container does not exist.");a.html('<div style="position:relative;width:100%;height:100%"><div class="container" style="overflow:hidden;position:absolute;width:100%;height:100%;z-index:2"></div><div class="background" style="position:absolute;width:100%;height:100%;z-index:1"></div></div>');
this.H=a.find("div.container");this.H.svg({onLoad:function(a){return function(c){a.svg=c;a.h("SVG initialized");A(a);a.Ba=a.svg.group();a.Ua=a.svg.group(a.Ba);a.Ka=a.svg.group(a.Ba);B(a)}}(this)});this.Ia();this.Qa(new Graph);this.Ma(new this.config.graphLoaderClass(this.config.graphLoader));this.Na(new this.config.graphParserClass(this.config.graphParser));this.Oa(new this.config.graphViewClass(this.config.graphView));this.Pa(new this.config.layoutClass(this.config.layout));"createTouch"in document?
jQuery(this.canvas).bind("touchstart",{context:this},function(a){var c=a.data.context;a.preventDefault();for(var d=0;d<a.L.changedTouches.length;d++){var e=a.L.changedTouches[d],f=c.g["_"+e.identifier]={oa:l,f:e,timestamp:(new Date).getTime()},h=s(c,e.pageX),i=t(c,e.pageY),j=c.sb(h,i);if(j)f.s=j,f.sa=h-j.Bb,f.ta=i-j.Cb,jQuery(c).trigger("nodetouchstart");else if(h=c.rb(h,i))f.I=h,jQuery(c).trigger("edgetouchstart");else{h=s(c,e.pageX);e=t(c,e.pageY);f.x=w(c,h,e);f.y=x(c,h,e);if(c.b){if(!c.m)c.m=f}else c.b=
f;jQuery(c).trigger("backgroundtouchstart")}}}).bind("touchmove",{context:this},function(a){var c=a.data.context;a.preventDefault();C(c);jQuery(c).trigger("touchmove")}).bind("touchend",{context:this},function(a){var c=a.data.context;a.preventDefault();C(c);for(var d=0;d<a.L.changedTouches.length;d++){var e=a.L.changedTouches[d],f=c.g["_"+e.identifier];f&&(new Date).getTime()-f.timestamp<300&&(f.s?f.s.hb?c.N(m):c.N(f.s.id):f.I?f.I.hb?c.M(m):c.M(f.I.id):(c.N(m),c.M(m)))}for(d=0;d<a.L.changedTouches.length;d++){e=
a.L.changedTouches[d];f=c.g["_"+e.identifier];delete c.g["_"+e.identifier];if(c.b==f&&(c.b=c.m,c.m=m,c.b))c.b.pageX=c.b.f.pageX,c.b.pageY=c.b.f.pageY,c.b.v=c.v,c.b.w=c.w,c.b.i=c.i;if(c.m==f&&(c.m=m,c.b))c.b.pageX=c.b.f.pageX,c.b.pageY=c.b.f.pageY,c.b.v=c.v,c.b.w=c.w,c.b.i=c.i}jQuery(c).trigger("touchend")}).bind("touchcancel",{context:this},function(a){var c=a.data.context;a.preventDefault();for(var d=0;d<a.L.changedTouches.length;d++)delete c.g["_"+a.L.changedTouches[d].identifier];jQuery(c).trigger("touchcancel")}):
(jQuery(document).mousemove({context:this},function(a){var c=a.data.context,d=c.g._mouse;if(d)d.f=a;c.ib=s(c,a.pageX);c.jb=t(c,a.pageY);C(c)}).mouseup({context:this},function(a){a.data.context.ra(a)}),this.H.find("svg").mousedown({context:this},function(a){var c=a.data.context;if(a.target==a.currentTarget){var d=c.g._mouse={oa:n,f:a,timestamp:(new Date).getTime()},e=s(c,a.pageX),a=t(c,a.pageY);d.x=w(c,e,a);d.y=x(c,e,a);if(c.b){if(!c.m)c.m=d}else c.b=d;jQuery(c).trigger("backgroundmousedown")}}).click({context:this},
o()),jQuery(this.canvas).mousewheel({context:this},function(a,c){var d=a.data.context;a.preventDefault();d.P(d.ba()+c*0.1);jQuery(d).trigger("mousewheel")}));A(this);jQuery(this).trigger("initialized")};Constellation.prototype.init=Constellation.prototype.gb;
Constellation.prototype.Ia=function(){this.H.append('<div class="zoomControls"><button class="zoomInButton">Zoom in</button><div class="zoomSlider"></div><button class="zoomOutButton">Zoom out</button></div>');var a=this.config.id;jQuery("head").append('<style type="text/css">#'+a+" .zoomControls { position: absolute; right: 20px; top: 20px; width: 20px; z-index: 1 } #"+a+" .zoomControls .ui-button { height: 20px; margin: 1px 0; width: 20px } #"+a+" .zoomSlider { left: 3px; height: 225px; margin: 11px 0 } </style>");
var b=this.config.zoomSlider;jQuery("#"+a+" .zoomInButton").button({icons:{primary:"ui-icon-plus"},text:n}).bind("click",{context:this},function(a){a=a.data.context;a.P(Math.min(b.max,a.ba()+b.step))});jQuery("#"+a+" .zoomOutButton").button({icons:{primary:"ui-icon-minus"},text:n}).bind("click",{context:this},function(a){a=a.data.context;a.P(Math.max(b.min,a.ba()-b.step))});jQuery("#"+a+" .zoomSlider").slider(b).bind("slide",{context:this},function(a,b){a.data.context.P(b.value)});this.P(b.value)};
Constellation.prototype.initZoomControls=Constellation.prototype.Ia;Constellation.prototype.Ta={id:"constellation",graphLoaderClass:SimpleGraphLoader,graphLoader:{url:"sample.graphml"},graphParserClass:GraphMlParser,graphParser:{},graphViewClass:TreeGraphView,graphView:{},layoutClass:RoamerLayout,layout:{},zoomSlider:{orientation:"vertical",min:0.2,max:2,value:1,step:0.05}};Constellation.prototype.B=[["node",{rendererClass:DefaultNodeRenderer}],["edge",{rendererClass:DefaultEdgeRenderer}]];
Constellation.prototype.$a=q("Y");Constellation.prototype.getModel=Constellation.prototype.$a;Constellation.prototype.Qa=function(a){this.h("Set model:",a);this.Y=a;this.q&&this.q.setGraph(this.Y);this.j&&this.j.setSource(this.Y);this.qa()};Constellation.prototype.setModel=Constellation.prototype.Qa;Constellation.prototype.Ya=q("j");Constellation.prototype.getGraphView=Constellation.prototype.Ya;
Constellation.prototype.Oa=function(a){this.h("Set graph view:",a);this.j&&(this.j.setConstellation(m),this.j.setSource(m),this.j.setResult(m),jQuery(this.j).unbind("change"));if(this.j=a)this.j.setConstellation(this),this.j.setSource(this.Y),this.j.setResult(this),jQuery(this.j).bind("change",{context:this},function(a){a.data.context.A()})};Constellation.prototype.setGraphView=Constellation.prototype.Oa;Constellation.prototype.Wa=q("p");Constellation.prototype.getGraphLoader=Constellation.prototype.Wa;
Constellation.prototype.Ma=function(a){this.h("Set graph loader:",a);this.p&&(this.p.setConstellation(m),this.p.setParser(m));if(this.p=a)this.p.setConstellation(this),this.p.setParser(this.q)};Constellation.prototype.setGraphLoader=Constellation.prototype.Ma;Constellation.prototype.Xa=q("q");Constellation.prototype.getGraphParser=Constellation.prototype.Xa;
Constellation.prototype.Na=function(a){this.h("Set graph parser:",a);this.q&&(this.p&&this.p.setParser(m),this.q.setGraph(m),jQuery(this.q).unbind("complete"));if(this.q=a)this.p&&this.p.setParser(this.q),this.q.setGraph(this.Y),jQuery(this.q).bind("complete",{context:this},function(a){a.data.context.qa()})};Constellation.prototype.setGraphParser=Constellation.prototype.Na;Constellation.prototype.Za=q("z");Constellation.prototype.getLayout=Constellation.prototype.Za;
Constellation.prototype.Pa=function(a){this.h("Set layout:",a);this.z&&(this.z.setConstellation(m),jQuery(this.z).unbind("change"));if(this.z=a)this.z.setConstellation(this),jQuery(this.z).bind("change",{context:this},function(a){a.data.context.Ja()})};Constellation.prototype.setLayout=Constellation.prototype.Pa;Constellation.prototype.ma=q("Ka");Constellation.prototype.getNodeContainer=Constellation.prototype.ma;Constellation.prototype.ja=q("Ua");Constellation.prototype.getEdgeContainer=Constellation.prototype.ja;
Constellation.prototype.Ea=q("t");Constellation.prototype.getSelectedNodeId=Constellation.prototype.Ea;Constellation.prototype.N=function(a){this.h("Set selected node ID:",a);if(this.O)this.O=m,jQuery(this).trigger("edgeSelected");if(this.t!=a)this.t=a,jQuery(this).trigger("nodeSelected")};Constellation.prototype.setSelectedNodeId=Constellation.prototype.N;Constellation.prototype.cb=q("O");Constellation.prototype.getSelectedEdgeId=Constellation.prototype.cb;
Constellation.prototype.M=function(a){if(this.t)this.t=m,jQuery(this).trigger("nodeSelected");if(this.O!=a)this.O=a,jQuery(this).trigger("edgeSelected")};Constellation.prototype.setSelectedEdgeId=Constellation.prototype.M;Constellation.prototype.Da=function(){return this.Ka.getBBox()};Constellation.prototype.getRendererBounds=Constellation.prototype.Da;
Constellation.prototype.G=function(a,b){this.h("Add node:",a);this.n(a)&&g("Failed to add node. Node already exists.");var c=new (this.k("node",b?b.Sa:[],"rendererClass",b,{rendererClass:DefaultNodeRenderer}))(this,a,b);c.create();c.draw();this.d.push(c);jQuery(this).trigger("nodeAdded",c);return c};Constellation.prototype.addNode=Constellation.prototype.G;Constellation.prototype.n=function(a){for(var b=0;b<this.d.length;b++)if(this.d[b].id==a)return this.d[b];return m};
Constellation.prototype.getNode=Constellation.prototype.n;Constellation.prototype.C=function(){return this.d.concat()};Constellation.prototype.getNodes=Constellation.prototype.C;Constellation.prototype.X=function(){return this.d.map(function(a){return a.id})};Constellation.prototype.getNodeIds=Constellation.prototype.X;Constellation.prototype.na=function(){return this.d.length};Constellation.prototype.getNodeLength=Constellation.prototype.na;
Constellation.prototype.removeNode=function(a){this.h("Remove node:",a);for(var b=0;b<this.d.length;b++){var c=this.d[b];if(c.id==a){c.destroy(c);this.d.splice(b,1);jQuery(this).trigger("nodeRemoved",c);return}}g("Failed to remove node. Node does not exist.")};Constellation.prototype.removeNode=Constellation.prototype.removeNode;
Constellation.prototype.F=function(a,b,c,d){this.h("Add edge:",a);this.J(a)&&g("Failed to add edge. Edge already exists.");(b=this.n(b))||g("Failed to add edge. Tail node does not exist.");(c=this.n(c))||g("Failed to add edge. Head node does not exist.");a=new (this.k("edge",d?d.Sa:[],"rendererClass",d,{rendererClass:DefaultNodeRenderer}))(this,a,b,c,d);a.create();a.draw();this.c.push(a);b.edges.push(a);c.edges.push(a);jQuery(this).trigger("edgeAdded",a);return a};
Constellation.prototype.addEdge=Constellation.prototype.F;Constellation.prototype.J=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b].id==a)return this.c[b];return m};Constellation.prototype.getEdge=Constellation.prototype.J;Constellation.prototype.V=function(){return this.c.map(function(a){return a.id})};Constellation.prototype.getEdgeIds=Constellation.prototype.V;Constellation.prototype.W=function(){return this.c.concat()};Constellation.prototype.getEdges=Constellation.prototype.W;
Constellation.prototype.ka=function(){return this.c.length};Constellation.prototype.getEdgeLength=Constellation.prototype.ka;
Constellation.prototype.$=function(a){this.h("Remove edge:",a);var b,c=m;for(b=0;b<this.c.length;b++)if(this.c[b].id==a){c=this.c[b];c.destroy();this.c.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}jQuery(this).trigger("edgeRemoved",c)}else g("Failed to remove edge. Edge does not exist.")};
Constellation.prototype.removeEdge=Constellation.prototype.$;Constellation.prototype.qa=function(){this.h("Model changed");this.j&&this.j.Ra()};Constellation.prototype.modelChanged=Constellation.prototype.qa;Constellation.prototype.A=function(){this.h("View changed");this.z&&this.z.A()};Constellation.prototype.viewChanged=Constellation.prototype.A;Constellation.prototype.Ja=function(){this.h("Layout changed");this.l()};Constellation.prototype.layoutChanged=Constellation.prototype.Ja;
Constellation.prototype.l=function(){var a;A(this);var b=this.C();for(a=0;a<b.length;a++)b[a].position();b=this.W();for(a=0;a<b.length;a++)b[a].draw()};function A(a){a.T=a.H.width();a.S=a.H.height();B(a)}function B(a){jQuery(a.Ba).attr("transform","translate("+(a.T/2-a.v)+","+(a.S/2-a.w)+")scale("+a.i+","+a.i+")")}Constellation.prototype.ba=q("i");Constellation.prototype.getZoomScale=Constellation.prototype.ba;Constellation.prototype.P=function(a){this.i=a;B(this)};
Constellation.prototype.setZoomScale=Constellation.prototype.P;function w(a,b,c){return(b-a.T/2+a.v)/a.i*Math.cos(-a.rotation)-(c-a.S/2+a.w)/a.i*Math.sin(-a.rotation)}function x(a,b,c){return(b-a.T/2+a.v)/a.i*Math.sin(-a.rotation)+(c-a.S/2+a.w)/a.i*Math.cos(-a.rotation)}function E(a,b,c){return(b*Math.cos(a.rotation)-c*Math.sin(a.rotation))*a.i+a.T/2-a.v}function F(a,b,c){return(b*Math.sin(a.rotation)+c*Math.cos(a.rotation))*a.i+a.S/2-a.w}function s(a,b){return b-a.H.offset().left}
function t(a,b){return b-a.H.offset().top}Constellation.prototype.wa=function(a,b){jQuery(this).trigger("nodemouseover",b.id)};Constellation.prototype.nodemouseoverHandler=Constellation.prototype.wa;Constellation.prototype.va=function(a,b){jQuery(this).trigger("nodemouseout",b.id)};Constellation.prototype.nodemouseoutHandler=Constellation.prototype.va;
Constellation.prototype.Z=function(a,b){var c=this.g._mouse={oa:n,s:b,f:a,timestamp:(new Date).getTime()},d=s(this,a.pageX),e=t(this,a.pageY);c.sa=w(this,d,e)-b.x;c.ta=x(this,d,e)-b.y;jQuery(this).trigger("nodemousedown",b.id)};Constellation.prototype.nodemousedownHandler=Constellation.prototype.Z;Constellation.prototype.xa=function(a,b){jQuery(this).trigger("nodemouseup",b.id)};Constellation.prototype.nodemouseupHandler=Constellation.prototype.xa;
Constellation.prototype.ua=function(a,b){var c=this.g._mouse;c&&(new Date).getTime()-c.timestamp<300&&(c.s&&(c.s.id==this.t?this.N(m):this.N(c.s.id)),jQuery(this).trigger("nodeclick",b.id))};Constellation.prototype.nodeclickHandler=Constellation.prototype.ua;Constellation.prototype.ha=function(a,b){jQuery(this).trigger("edgemouseover",b.id)};Constellation.prototype.edgemouseoverHandler=Constellation.prototype.ha;Constellation.prototype.ga=function(a,b){jQuery(this).trigger("edgemouseout",b.id)};
Constellation.prototype.edgemouseoutHandler=Constellation.prototype.ga;Constellation.prototype.fa=function(a,b){this.g._mouse={I:b,oa:n,f:a,timestamp:(new Date).getTime()};jQuery(this).trigger("edgemousedown",b.id)};Constellation.prototype.edgemousedownHandler=Constellation.prototype.fa;Constellation.prototype.ia=function(a,b){jQuery(this).trigger("edgemouseup",b.id)};Constellation.prototype.edgemouseupHandler=Constellation.prototype.ia;
Constellation.prototype.ea=function(a,b){var c=this.g._mouse;c&&(new Date).getTime()-c.timestamp<300&&(c.I&&(c.I.id==this.O?this.M(m):this.M(c.I.id)),jQuery(this).trigger("edgeclick",b.id))};Constellation.prototype.edgeclickHandler=Constellation.prototype.ea;Constellation.prototype.ra=function(a){var b=this.g._mouse;if(b)b.f=a;b&&(new Date).getTime()-b.timestamp<300&&(this.N(m),this.M(m));C(this);delete this.g._mouse;if(this.b==b)this.b=this.m;if(this.m==b)this.m=m;jQuery(this).trigger("mouseup")};
function C(a){var b=a.b,c=a.m;if(b){if(c){var d=E(a,c.x,c.y)-E(a,b.x,b.y),e=F(a,c.x,c.y)-F(a,b.x,b.y),f=Math.sqrt(d*d+e*e),h=s(a,c.f.pageX)-s(a,b.f.pageX),i=t(a,c.f.pageY)-t(a,b.f.pageY),c=Math.sqrt(h*h+i*i),d=Math.atan2(i,h)-Math.atan2(e,d);d>Math.PI&&(d-=2*Math.PI);d<-Math.PI&&(d=2*Math.PI+d);a.i=a.i*c/f;a.rotation+=d}a.v=a.v+E(a,b.x,b.y)-s(a,b.f.pageX);a.w=a.w+F(a,b.x,b.y)-t(a,b.f.pageY);B(a)}}
Constellation.prototype.k=function(a,b,c,d,e){var f,h;if(d&&d[c]!==void 0)return d[c];if(b&&b.length>0)for(d=this.da.length;d>0;d--){h=this.da[d-1];f=h[0];var i=jQuery.inArray(".",f),j=i<0?f:f.substr(0,i);if(!(j!=""&&j!=a)){i=i<0?[]:f.substr(i+1).split(".");j=l;for(f=0;f<i.length;f++)if(jQuery.inArray(i[f],b)<0){j=n;break}if(j&&h[1][c]!==void 0)return h[1][c]}}for(d=this.da.length;d>0;d--)if((h=this.da[d-1])&&h.length>1&&h[0]==a&&h[1][c]!==void 0)return h[1][c];return e?e[c]:void 0};
Constellation.prototype.getStyle=Constellation.prototype.k;Constellation.prototype.h=function(a){jQuery(this).trigger("log",["debug"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.debug=Constellation.prototype.h;Constellation.prototype.warn=function(a){jQuery(this).trigger("log",["warn"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.warn=Constellation.prototype.warn;Constellation.prototype.error=function(a){jQuery(this).trigger("log",["error"].concat(Array.prototype.slice.call(arguments)))};
Constellation.prototype.error=Constellation.prototype.error;
